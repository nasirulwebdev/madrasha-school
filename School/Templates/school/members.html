{% extends "School/base.html" %}

{% block content %}

<!-- ================= HERO SLIDER ================= -->
<div id="collegeSlider" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000" style="z-index:1; position:relative;">
  <div class="carousel-inner">

    <div class="carousel-item active">
      <img src="https://i.pinimg.com/1200x/51/dc/a4/51dca4b497ddddd240be2b5213029dab.jpg" class="d-block w-100" style="height:520px; object-fit:cover;">
      <div class="carousel-caption bg-dark bg-opacity-50 rounded p-4">
        <h1 class="fw-bold">Sundrahobi High School</h1>
        <p class="lead">Empowering students for a brighter future</p>
        <a href="#" class="btn btn-primary">Explore Programs</a>
      </div>
    </div>

    <div class="carousel-item">
      <img src="https://i.pinimg.com/1200x/3b/ad/46/3bad46d0d9a35c86c14cda8fbc4710c2.jpg" class="d-block w-100" style="height:520px; object-fit:cover;">
      <div class="carousel-caption bg-dark bg-opacity-50 rounded p-4">
        <h1 class="fw-bold">Experienced Faculty</h1>
        <p class="lead">Learn from industry experts</p>
      </div>
    </div>

    <div class="carousel-item">
      <img src="https://i.pinimg.com/1200x/ba/e4/3b/bae43b8600eab850c89c346f97d7afa1.jpg" class="d-block w-100" style="height:520px; object-fit:cover;">
      <div class="carousel-caption bg-dark bg-opacity-50 rounded p-4">
        <h1 class="fw-bold">State-of-the-Art Labs</h1>
        <p class="lead">Hands-on learning for every student</p>
      </div>
    </div>

    <div class="carousel-item">
      <img src="https://i.pinimg.com/1200x/a0/85/f8/a085f892d0b3a2b603bd0399dddf6a4a.jpg" class="d-block w-100" style="height:520px; object-fit:cover;">
      <div class="carousel-caption bg-dark bg-opacity-50 rounded p-4">
        <h1 class="fw-bold">Vibrant Campus Life</h1>
        <p class="lead">Activities, clubs, and sports for all</p>
      </div>
    </div>

  </div>

  <button class="carousel-control-prev" type="button" data-bs-target="#collegeSlider" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#collegeSlider" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>


<!-- ================= MEMBERS ================= -->
<div class="container my-5">
  <h4 class="mb-3">Total Members: {{ members.count }}</h4>
  <div class="text-center mb-4">
    <a href="{% url 'members' %}" class="btn btn-secondary btn-sm">All</a>
    <a href="?member_type=teacher" class="btn btn-primary btn-sm">Teacher</a>
    <a href="?member_type=student" class="btn btn-success btn-sm">Student</a>
    <a href="?member_type=staff" class="btn btn-warning btn-sm">Staff</a>
  </div>

  <div class="row">
    {% for member in members %}
      <div class="col-md-3 mb-4">
        <div class="card h-100 shadow">
          {% if member.photo %}
            <img src="{{ member.photo.url }}" class="card-img-top" style="height:250px; object-fit:cover;">
          {% else %}
            <img src="https://via.placeholder.com/250x250?text=No+Image" class="card-img-top">
          {% endif %}
          < class="card-body text-center">
            <h5 class="card-title">{{ member.name }}</h5>
            <p class="card-text">{{ member.designation }}</p>
            {% if member.phone %}
              <a href="tel:{{ member.phone }}" class="btn btn-primary btn-sm mb-2">{{ member.phone }}</a>
            {% endif %}

             <!-- âœ… ACTION BUTTONS -->
              <div class="mt-2 d-flex justify-content-center gap-1 flex-wrap">
                <a href="{% url 'members_detail' member.id %}"
                  class="btn btn-outline-info btn-sm">
                  View
                </a>

                <a href="{% url 'members_update' member.id %}"
                  class="btn btn-outline-success btn-sm">
                  Update
                </a>

                <a href="{% url 'members_delete' member.id %}"
                  class="btn btn-outline-danger btn-sm">
                  Delete
                </a>
              </div>

          </div>
        </div>
      </div>
    {% empty %}
      <p class="text-center">No members found.</p>
    {% endfor %}
  </div>

  <!-- ================= Pagination ================= -->
  {% if is_paginated %}
  <nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
      {% if page_obj.has_previous %}
        <li class="page-item">
          <a class="page-link" href="?{% if selected_type %}member_type={{ selected_type }}&{% endif %}page={{ page_obj.previous_page_number }}">Previous</a>
        </li>
      {% else %}
        <li class="page-item disabled"><span class="page-link">Previous</span></li>
      {% endif %}

      {% for num in paginator.page_range %}
        {% if num == page_obj.number %}
          <li class="page-item active"><span class="page-link">{{ num }}</span></li>
        {% else %}
          <li class="page-item">
            <a class="page-link" href="?{% if selected_type %}member_type={{ selected_type }}&{% endif %}page={{ num }}">{{ num }}</a>
          </li>
        {% endif %}
      {% endfor %}

      {% if page_obj.has_next %}
        <li class="page-item">
          <a class="page-link" href="?{% if selected_type %}member_type={{ selected_type }}&{% endif %}page={{ page_obj.next_page_number }}">Next</a>
        </li>
      {% else %}
        <li class="page-item disabled"><span class="page-link">Next</span></li>
      {% endif %}
    </ul>
  </nav>
  {% endif %}
</div>

{% endblock %}